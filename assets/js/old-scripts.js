// jQuery(()=>{
document.body.innerHTML =
    '<svg viewBox="0 0 293.4 293.4" enable-background="new 0 0 293.4 293.4" opacity="0" id="gear-clip-path-def-svg">' +
    '    <defs>' +
    '        <clipPath id="gear-clip-path-alt">' +
    '            <path id="clipping_path-alt" d="M165.4,27.5c8.4,1.3,16.7,3.5,24.7,6.6l13.2-17.4c1.4-1.9,4-2.4,6-1.2L229,26.8' +
    '\tc2,1.2,2.9,3.7,2,5.8l-8.5,20.2c6.6,5.4,12.7,11.4,18,18l20.2-8.5c2.2-0.9,4.6-0.1,5.8,2L278,84.1c1.2,2,0.7,4.6-1.2,6l-17.4,13.2' +
    '\tc3.1,8,5.3,16.2,6.6,24.7l21.7,2.8c2.3,0.3,4.1,2.3,4.1,4.6v22.8c0,2.3-1.7,4.3-4.1,4.6l-21.7,2.8c-1.3,8.4-3.5,16.7-6.6,24.7' +
    '\tl17.4,13.2c1.9,1.4,2.4,4,1.2,6L266.6,229c-1.2,2-3.7,2.9-5.8,2l-20.2-8.5c-5.4,6.6-11.4,12.7-18,18l8.5,20.2c0.9,2.2,0.1,4.6-2,5.8' +
    '\tL209.3,278c-2,1.2-4.6,0.7-6-1.2l-13.2-17.4c-8,3.1-16.2,5.3-24.7,6.6l-2.7,21.7c-0.3,2.3-2.3,4.1-4.6,4.1h-22.8' +
    '\tc-2.3,0-4.3-1.7-4.6-4.1l-2.8-21.7c-8.4-1.3-16.7-3.5-24.7-6.6l-13.2,17.4c-1.4,1.9-4,2.4-6,1.2l-19.7-11.4c-2-1.2-2.9-3.7-2-5.8' +
    '\tl8.5-20.2c-6.6-5.4-12.7-11.4-18-18L32.6,231c-2.2,0.9-4.6,0.1-5.8-2l-11.4-19.7c-1.2-2-0.7-4.6,1.2-6l17.4-13.2' +
    '\tc-3.1-8-5.3-16.2-6.6-24.7l-21.7-2.8c-2.3-0.3-4.1-2.3-4.1-4.6v-22.8c0-2.3,1.7-4.3,4.1-4.6l21.7-2.8c1.3-8.4,3.5-16.7,6.6-24.7' +
    '\tL16.6,90.1c-1.9-1.4-2.4-4-1.2-6l11.4-19.7c1.2-2,3.7-2.9,5.8-2l20.2,8.5c5.4-6.6,11.4-12.7,18-18l-8.5-20.2c-0.9-2.2-0.1-4.6,2-5.8' +
    '\tL84,15.4c2-1.2,4.6-0.7,6,1.2l13.2,17.4c8-3.1,16.2-5.3,24.7-6.6l2.8-21.7c0.3-2.3,2.3-4.1,4.6-4.1h22.8c2.3,0,4.3,1.7,4.6,4.1' +
    '\tL165.4,27.5z"/>' +
    '        </clipPath>' +
    '        <clipPath id="gear-clip-path">' +
    '            <path id="Clipping_Path" d="M165.4,27.5c8.4,1.3,16.7,3.5,24.7,6.6l13.2-17.4c1.4-1.9,4-2.4,6-1.2L229,26.8' +
    '\tc2,1.2,2.9,3.7,2,5.8l-8.5,20.2c6.6,5.4,12.7,11.4,18,18l20.2-8.5c2.2-0.9,4.6-0.1,5.8,2L278,84.1c1.2,2,0.7,4.6-1.2,6l-17.4,13.2' +
    '\tc3.1,8,5.3,16.2,6.6,24.7l21.7,2.8c2.3,0.3,4.1,2.3,4.1,4.6v22.8c0,2.3-1.7,4.3-4.1,4.6l-21.7,2.8c-1.3,8.4-3.5,16.7-6.6,24.7' +
    '\tl17.4,13.2c1.9,1.4,2.4,4,1.2,6L266.6,229c-1.2,2-3.7,2.9-5.8,2l-20.2-8.5c-5.4,6.6-11.4,12.7-18,18l8.5,20.2c0.9,2.2,0.1,4.6-2,5.8' +
    '\tL209.3,278c-2,1.2-4.6,0.7-6-1.2l-13.2-17.4c-8,3.1-16.2,5.3-24.7,6.6l-2.7,21.7c-0.3,2.3-2.3,4.1-4.6,4.1h-22.8' +
    '\tc-2.3,0-4.3-1.7-4.6-4.1l-2.8-21.7c-8.4-1.3-16.7-3.5-24.7-6.6l-13.2,17.4c-1.4,1.9-4,2.4-6,1.2l-19.7-11.4c-2-1.2-2.9-3.7-2-5.8' +
    '\tl8.5-20.2c-6.6-5.4-12.7-11.4-18-18L32.6,231c-2.2,0.9-4.6,0.1-5.8-2l-11.4-19.7c-1.2-2-0.7-4.6,1.2-6l17.4-13.2' +
    '\tc-3.1-8-5.3-16.2-6.6-24.7l-21.7-2.8c-2.3-0.3-4.1-2.3-4.1-4.6v-22.8c0-2.3,1.7-4.3,4.1-4.6l21.7-2.8c1.3-8.4,3.5-16.7,6.6-24.7' +
    '\tL16.6,90.1c-1.9-1.4-2.4-4-1.2-6l11.4-19.7c1.2-2,3.7-2.9,5.8-2l20.2,8.5c5.4-6.6,11.4-12.7,18-18l-8.5-20.2c-0.9-2.2-0.1-4.6,2-5.8' +
    '\tL84,15.4c2-1.2,4.6-0.7,6,1.2l13.2,17.4c8-3.1,16.2-5.3,24.7-6.6l2.8-21.7c0.3-2.3,2.3-4.1,4.6-4.1h22.8c2.3,0,4.3,1.7,4.6,4.1' +
    '\tL165.4,27.5z"/>' +
    '        </clipPath>' +
    '    </defs>' +
    '</svg>' +

    document.body.innerHTML;


function fixContainer() {
    if (window.innerWidth > 1500) {
        document.documentElement.style.fontSize = `${10}px`;
    } else if (window.innerWidth >= 1024) {
        document.documentElement.style.fontSize = `${10 * window.innerWidth / 1500}px`;
    } else {
        document.documentElement.style.fontSize = `${10}px`;
    }
}

fixContainer();
window.addEventListener('resize', fixContainer);

const apiLink = 'https://codesign82.com/buyabilityassessment/wp-json/wp/v2/questions?per_page=100&_embed';
let isLoading = true;
const categories = {};
const fetchedQuestions = fetch(apiLink)
    .then(res => res.json())
    .then(json => {
        isLoading = false;
        window.dispatchEvent(new Event('questionsLoaded'));

        json.map((question, index) => {
            const questionObj = {
                id: question.id,
                category: question.questions_categories[0],
                title: question.title.rendered,
                suggested_threshold: +question.acf.suggestion_threshold,
                suggestion_message: question.acf.suggestion_button,
                result: 0,
            };
            categories[question.questions_categories[0]] ?
                categories[question.questions_categories[0]].questions.push(questionObj) :
                (categories[question.questions_categories[0]] = {
                    name: question._embedded['wp:term'][0][0].name,
                    color: question._embedded['wp:term'][0][0].acf.ba_color,
                    suggested_threshold: +question._embedded['wp:term'][0][0].acf.ba_suggested_threshold,
                    suggestion_message: question._embedded['wp:term'][0][0].acf.ba_suggestion_message,
                    questions: [questionObj],
                    result: 0,
                });
        });

        console.log(categories);
    });

//  region step one
let questions = [];

let currentQuestion = 0;
const beginBtn = document.querySelector('.begin-btn');
const esoEmail = document.querySelector('.eso-email');
const nextQues = document.querySelector('.next-ques');
let nextQuesContent = document.querySelector('.next-ques').innerHTML;
const prevQues = document.querySelector('.prev-ques');
const evaluationNumbers = document.querySelectorAll('.evaluation-number .circle');
let qusCounter = document.querySelector('#qusCounter');
let quesLength = document.querySelector('.quesLength');
const quesTitle = document.querySelector('.ques-title');
const quesBody = document.querySelector('.ques-body');
const phasesNumber = document.querySelector('.phases .number.active');
// let checkBox = document.querySelector('.checkmark');
let inputs = document.querySelectorAll('.data input');
let EvalCircles = document.querySelectorAll('.evaluation-number .circle');
let loading = document.getElementById('loading');
let circles = Array.from(EvalCircles);
const backToStep2 = document.querySelector('.backToStep2');
const stepsWrapper = document.querySelector('.step-wrapper');
const step1 = document.querySelector('#step-1');
const step2 = document.querySelector('#step-2');
const step3 = document.querySelector('#step-3');
const resultEmail = step3.querySelector('.result .email');
const tabContentWrapper = step3.querySelector('.tabContentWrapper');
const tabNav = step3.querySelector('.tabNav');
const totalGearResult = step3.querySelector('svg.total-gear .svg-percentage');
const totalGearCircle = step3.querySelector('svg.total-gear .gear-circle');
const gearsContainer = step3.querySelector('.gears-container');


beginBtn.classList.add('active');

// // start the app
// beginBtn.disabled = true;
//
// //todo disabled in css
// esoEmail.onkeyup = function () {
//   if (esoEmail.value !== '') {
//     beginBtn.disabled = false;
//     beginBtn.classList.add('active');
//   }
//   else {
//     beginBtn.disabled = true;
//     beginBtn.classList.remove('active');
//   }
// };
// // start the app


// show questions step by clicking on begin start btn
document.addEventListener('wpcf7mailsent', function (event) {
    console.log(esoEmail, esoEmail.value);
    window.sendToEmail = esoEmail.value;
    step1.classList.remove('active');
    step1.nextElementSibling.classList.add('active');
    qusCounter.textContent = 1;
    setTimeout(function () {
        fetchedQuestions.then(() => {
            loading.classList.add('active');
            questions = Object.values(categories).map(category => category.questions).flat();
            // Set Our Question InnerHtml from our questions array
            quesTitle.innerHTML = categories[questions[currentQuestion].category].name;
            quesBody.innerHTML = questions[currentQuestion].title;
// Set Our Question InnerHtml from our questions array

// Set our Questions Length from our question array length
            quesLength.innerHTML = questions.length;
// Set our Questions Length from our question array length

        });
    }, 1000);
}, false);

// show questions step by clicking on begin start btn


// show next qus button if evaluationNumber has class active
evaluationNumbers.forEach(function (number) {
    number.addEventListener('click', function () {
        number.classList.add('active');
        nextQues.classList.add('active');
        questions[currentQuestion].result = +number.dataset.number;
    });
});
// show next qus button if evaluationNumber has class active

// move to next question from our question array
function showStepThree() {
    step2.classList.remove('active');
    step2.nextElementSibling.classList.add('active');
    phasesNumber.classList.remove('active');
    phasesNumber.nextElementSibling.classList.add('active');
    Object.values(categories).forEach((category, catIndex) => {
        category.result = category.questions.reduce((a, b) => a + b.result, 0) / category.questions.length / 5 * 100;
        const splitCatName = category.name.split(' ');

        gearsContainer.innerHTML += `
              <svg class="sub-gear ${catIndex % 2 === 0 ? 'alt' : ''}" viewBox="0 0 293.4 293.4">
                  <circle class="gear-circle-white" clip-path="url(#gear-clip-path)" fill="none" stroke="#fff" stroke-width="45" stroke-miterlimit="10" cx="146.7" cy="146.7" r="124.1"/>
                  <circle data-percent="${category.result}" class="gear-circle" clip-path="url(#gear-clip-path)" fill="none" stroke="${category.color}" stroke-width="45" stroke-miterlimit="10" cx="146.7" cy="146.7" r="124.1"/>
                  <path class="gear-stroke" fill="none" stroke="${category.color}" stroke-width="2" stroke-miterlimit="10" d="M165.4,27.5
\tc8.4,1.3,16.7,3.5,24.7,6.6l13.2-17.4c1.4-1.9,4-2.4,6-1.2L229,26.8c2,1.2,2.9,3.7,2,5.8l-8.5,20.2c6.6,5.4,12.7,11.4,18,18
\tl20.2-8.5c2.2-0.9,4.6-0.1,5.8,2L278,84.1c1.2,2,0.7,4.6-1.2,6l-17.4,13.2c3.1,8,5.3,16.2,6.6,24.7l21.7,2.8
\tc2.3,0.3,4.1,2.3,4.1,4.6v22.8c0,2.3-1.7,4.3-4.1,4.6l-21.7,2.8c-1.3,8.4-3.5,16.7-6.6,24.7l17.4,13.2c1.9,1.4,2.4,4,1.2,6
\tL266.6,229c-1.2,2-3.7,2.9-5.8,2l-20.2-8.5c-5.4,6.6-11.4,12.7-18,18l8.5,20.2c0.9,2.2,0.1,4.6-2,5.8L209.3,278
\tc-2,1.2-4.6,0.7-6-1.2l-13.2-17.4c-8,3.1-16.2,5.3-24.7,6.6l-2.7,21.7c-0.3,2.3-2.3,4.1-4.6,4.1h-22.8c-2.3,0-4.3-1.7-4.6-4.1
\tl-2.8-21.7c-8.4-1.3-16.7-3.5-24.7-6.6l-13.2,17.4c-1.4,1.9-4,2.4-6,1.2l-19.7-11.4c-2-1.2-2.9-3.7-2-5.8l8.5-20.2
\tc-6.6-5.4-12.7-11.4-18-18L32.6,231c-2.2,0.9-4.6,0.1-5.8-2l-11.4-19.7c-1.2-2-0.7-4.6,1.2-6l17.4-13.2c-3.1-8-5.3-16.2-6.6-24.7
\tl-21.7-2.8c-2.3-0.3-4.1-2.3-4.1-4.6v-22.8c0-2.3,1.7-4.3,4.1-4.6l21.7-2.8c1.3-8.4,3.5-16.7,6.6-24.7L16.6,90.1
\tc-1.9-1.4-2.4-4-1.2-6l11.4-19.7c1.2-2,3.7-2.9,5.8-2l20.2,8.5c5.4-6.6,11.4-12.7,18-18l-8.5-20.2c-0.9-2.2-0.1-4.6,2-5.8L84,15.4
\tc2-1.2,4.6-0.7,6,1.2l13.2,17.4c8-3.1,16.2-5.3,24.7-6.6l2.8-21.7c0.3-2.3,2.3-4.1,4.6-4.1h22.8c2.3,0,4.3,1.7,4.6,4.1L165.4,27.5z"/>
    
                  <path class="gear-inner-circle" fill="#F0EFEB" d="M146.7,249.2c56.5,0,102.5-46,102.5-102.5c0-56.5-46-102.5-102.5-102.5
\tS44.2,90.2,44.2,146.7C44.2,203.1,90.2,249.2,146.7,249.2z"/>
                    <text class="svg-percentage" x="97" y="120" fill="${category.color}" style="font-size: 60px;">${~~category.result}</text>
                    <text class="svg-percentage" x="170" y="100" fill="${category.color}" style="font-size: 40px;">%</text>
                    <text class="svg-word-1" x="50%" y="165" fill="${category.color}" style="font-size: 23px;text-transform: uppercase;font-weight: 500;">${splitCatName[0]}</text>
                    ${splitCatName[1] ? `<text class="svg-word-2" x="50%" y="197" fill="${category.color}" style="font-size: 23px;text-transform: uppercase;font-weight: 500;">${splitCatName[1]}</text>` : ''}
                </svg>
`
        if (category.result <= category.suggested_threshold) {
            tabNav.innerHTML +=
                `<a class="tabLink ${catIndex === 0 ? 'is-active' : ''}" href="#">${category.name}</a>`;
            tabContentWrapper.innerHTML += `
      <div class="tabContent ${catIndex === 0 ? 'is-active' : ''}">
        <h3 class="headline-3">${category.name}</h3>
        <div class="gearPercent">
          <div class="gear">
          <svg class="sub-gear" viewBox="0 0 293.4 293.4">
                  <circle class="gear-circle-white" clip-path="url(#gear-clip-path)" fill="none" stroke="#ffffff" stroke-width="45" stroke-miterlimit="10" cx="146.7" cy="146.7" r="124.1"/>
                  <circle data-percent="${category.result}" class="gear-circle" clip-path="url(#gear-clip-path)" fill="none" stroke="${category.color}" stroke-width="45" stroke-miterlimit="10" cx="146.7" cy="146.7" r="124.1"/>
                  <path class="gear-stroke" fill="none" stroke="${category.color}" stroke-width="2" stroke-miterlimit="10" d="M165.4,27.5
\tc8.4,1.3,16.7,3.5,24.7,6.6l13.2-17.4c1.4-1.9,4-2.4,6-1.2L229,26.8c2,1.2,2.9,3.7,2,5.8l-8.5,20.2c6.6,5.4,12.7,11.4,18,18
\tl20.2-8.5c2.2-0.9,4.6-0.1,5.8,2L278,84.1c1.2,2,0.7,4.6-1.2,6l-17.4,13.2c3.1,8,5.3,16.2,6.6,24.7l21.7,2.8
\tc2.3,0.3,4.1,2.3,4.1,4.6v22.8c0,2.3-1.7,4.3-4.1,4.6l-21.7,2.8c-1.3,8.4-3.5,16.7-6.6,24.7l17.4,13.2c1.9,1.4,2.4,4,1.2,6
\tL266.6,229c-1.2,2-3.7,2.9-5.8,2l-20.2-8.5c-5.4,6.6-11.4,12.7-18,18l8.5,20.2c0.9,2.2,0.1,4.6-2,5.8L209.3,278
\tc-2,1.2-4.6,0.7-6-1.2l-13.2-17.4c-8,3.1-16.2,5.3-24.7,6.6l-2.7,21.7c-0.3,2.3-2.3,4.1-4.6,4.1h-22.8c-2.3,0-4.3-1.7-4.6-4.1
\tl-2.8-21.7c-8.4-1.3-16.7-3.5-24.7-6.6l-13.2,17.4c-1.4,1.9-4,2.4-6,1.2l-19.7-11.4c-2-1.2-2.9-3.7-2-5.8l8.5-20.2
\tc-6.6-5.4-12.7-11.4-18-18L32.6,231c-2.2,0.9-4.6,0.1-5.8-2l-11.4-19.7c-1.2-2-0.7-4.6,1.2-6l17.4-13.2c-3.1-8-5.3-16.2-6.6-24.7
\tl-21.7-2.8c-2.3-0.3-4.1-2.3-4.1-4.6v-22.8c0-2.3,1.7-4.3,4.1-4.6l21.7-2.8c1.3-8.4,3.5-16.7,6.6-24.7L16.6,90.1
\tc-1.9-1.4-2.4-4-1.2-6l11.4-19.7c1.2-2,3.7-2.9,5.8-2l20.2,8.5c5.4-6.6,11.4-12.7,18-18l-8.5-20.2c-0.9-2.2-0.1-4.6,2-5.8L84,15.4
\tc2-1.2,4.6-0.7,6,1.2l13.2,17.4c8-3.1,16.2-5.3,24.7-6.6l2.8-21.7c0.3-2.3,2.3-4.1,4.6-4.1h22.8c2.3,0,4.3,1.7,4.6,4.1L165.4,27.5z"/>
    
                  <path class="gear-inner-circle" fill="#F0EFEB" d="M146.7,249.2c56.5,0,102.5-46,102.5-102.5c0-56.5-46-102.5-102.5-102.5
\tS44.2,90.2,44.2,146.7C44.2,203.1,90.2,249.2,146.7,249.2z"/>
                    <text class="svg-percentage" x="97" y="120" fill="${category.color}" style="font-size: 60px;">${~~category.result}</text>
                    <text class="svg-percentage" x="170" y="100" fill="${category.color}" style="font-size: 40px;">%</text>
                    <text class="svg-word-1" x="50%" y="165" fill="${category.color}" style="font-size: 23px;text-transform: uppercase;font-weight: 500;">${splitCatName[0]}</text>
                    ${splitCatName[1] ? `<text class="svg-word-2" x="50%" y="197" fill="${category.color}" style="font-size: 23px;text-transform: uppercase;font-weight: 500;">${splitCatName[1]}</text>` : ''}
                </svg>
</div>
          <div class="results">
            <h2 class="headline-2">Your ${category.name} is <span>${~~category.result}%</span> strong. You can improve it using the following tools and opportunities.</h2>
            <div class="headline-3">${category.suggestion_message}</div>
            ${category.questions.map(question => {
                if (question.result <= question.suggested_threshold)
                    return `<a class="btn btn-medium" href="${question.suggestion_message.url}" target="${question.suggestion_message.target}">
                        ${question.suggestion_message.title}
                        <svg height="8" viewBox="0 0 5 8" width="5">
                              <path d="M2.313-.063l2.756 3.84v.188L2.312 7.806H.458l2.358-3.931L.458-.063z" fill="#fff"/>
                        </svg>
                      </a>`
            }).join('')}
          </div>
        </div>
      </div>`;


        }


    });
    categories.total = Object.values(categories).reduce((a, b) => a + b.result, 0) / Object.keys(categories).length;
    totalGearResult.innerHTML = ~~categories.total;
    totalGearCircle.dataset.percent = categories.total;
    resultEmail.textContent = window.sendToEmail;
    console.log(window.sendToEmail, esoEmail, resultEmail);

    let myTabs = tabs({
        el: '#tabs',
        tabNavigationLinks: '.tabLink',
        tabContentContainers: '.tabContent',
    });
    gsap.set('.svg-word-1,.svg-word-2', {xPercent: -50})
    gsap.set('.gear-circle', {rotation: -90, transformOrigin: 'center'});
    gsap.set('svg.alt .gear-stroke, #gear-clip-path-alt', {rotation: -15, transformOrigin: 'center'});
    gsap.fromTo('.gear-circle', {drawSVG: 0}, {
        drawSVG(self, target) {
            return `${target.dataset.percent}%`;
        }
    })
    myTabs.init();
    const results = {}
    for (let category of Object.values(categories)) {
        if (!category.name) continue;
        results[category.name] = category.result + '%';
    }
    results.total = categories.total;

    wp.ajax.post('send_results_email', {results, email: window.sendToEmail})
        .done(function (response) {
            console.log('email sent with the results')
        })
        .fail(function () {
            console.log('email failed')
        });

}

nextQues.addEventListener('click', () => {
    evaluationNumbers.forEach(function (number) {
        nextQues.classList.remove('active');
        number.classList.remove('active');
    });
    if (qusCounter.textContent <= questions.length - 1) {
        qusCounter.textContent++;
        currentQuestion++;
        quesTitle.innerHTML = categories[questions[currentQuestion].category].name;
        quesBody.innerHTML = questions[currentQuestion].title;
    }
    // change text of next to finish
    if (qusCounter.textContent == questions.length) {
        nextQues.textContent = 'Finish';
        nextQues.addEventListener('click', showStepThree);
    }
});
// move to next question from our question array

// move to previous question from our question array
prevQues.addEventListener('click', () => {
    evaluationNumbers.forEach(function (number) {
        nextQues.classList.remove('active');
        number.classList.remove('active');
    });
    qusCounter.textContent--;
    if (currentQuestion === 0) {
        stepsWrapper.classList.remove('active');
        stepsWrapper.previousElementSibling.classList.add('active');
        loading.classList.remove('active');
    } else {
        currentQuestion--;
    }
    quesTitle.innerHTML = categories[questions[currentQuestion].category].name;
    quesBody.innerHTML = questions[currentQuestion].title;
    if (qusCounter.textContent < questions.length) {
        nextQues.innerHTML = nextQuesContent;
    }
    if (nextQues.textContent !== 'Finish') {
        nextQues.removeEventListener('click', showStepThree);
    }
});
// move to previous question from our question array

// check on blur if inputs = '' show error msg
inputs.forEach((input) => {
    input.addEventListener('blur', function () {
        if (input.value === '') {
            input.classList.add('on-error');
            setTimeout(function () {
                input.classList.remove('on-error');
            }, 2000);
        }
    });
});
// check on blur if inputs = '' show error msg

// // toggle class on check box circle
//     checkBox.addEventListener('click', () => {
//         checkBox.classList.toggle('active');
//     });
// // toggle class on check box circle

// loop in Evaluation Circles and on click add active
circles.reverse();
for (let i = 0; i < circles.length; i++) {
    circles[i].addEventListener('click', function () {
        let index = this.getAttribute('data-number');
        let slice = circles.slice(0, index);
        let notSliced = circles.slice(index);
        for (let i = 0; i < slice.length; i++) {
            slice[i].classList.add('active');
        }
        for (let i = 0; i < notSliced.length; i++) {
            notSliced[i].classList.remove('active');
        }
    });
}
// loop in Evaluation Circles and on click add active

// back to second step by clicking on back btn
backToStep2.addEventListener('click', () => {
    window.location.reload();
    // step3.classList.remove('active');
    // step3.previousElementSibling.classList.add('active');
    // phasesNumber.classList.add('active');
    // phasesNumber.nextElementSibling.classList.remove('active');
    // phasesNumber.previousElementSibling.classList.remove('active');
});
// back to second step by clicking on back btn

// tabs
let tabs = function (options) {

    let el = document.querySelector(options.el);
    let tabNavigationLinks = el.querySelectorAll(options.tabNavigationLinks);
    let tabContentContainers = el.querySelectorAll(options.tabContentContainers);
    let activeIndex = 0;
    let initCalled = false;

    let init = function () {
        if (!initCalled) {
            initCalled = true;
            el.classList.remove('no-js');

            for (let i = 0; i < tabNavigationLinks.length; i++) {
                let link = tabNavigationLinks[i];
                handleClick(link, i);
            }
        }
    };

    let handleClick = function (link, index) {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            goToTab(index);
        });
    };

    let goToTab = function (index) {
        if (index !== activeIndex && index >= 0 && index <= tabNavigationLinks.length) {
            tabNavigationLinks[activeIndex].classList.remove('is-active');
            tabNavigationLinks[index].classList.add('is-active');
            tabContentContainers[activeIndex].classList.remove('is-active');
            tabContentContainers[index].classList.add('is-active');
            activeIndex = index;
        }
    };

    return {
        init: init,
        goToTab: goToTab,
    };
};
// });